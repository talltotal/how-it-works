(window.webpackJsonp=window.webpackJsonp||[]).push([[54],{319:function(e,v,t){"use strict";t.r(v);var o=t(14),_=Object(o.a)({},(function(){var e=this,v=e._self._c;return v("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[v("h1",{attrs:{id:"vscode-eslint"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#vscode-eslint"}},[e._v("#")]),e._v(" "),v("a",{attrs:{href:"https://github.com/Microsoft/vscode-eslint",target:"_blank",rel:"noopener noreferrer"}},[e._v("vscode-eslint"),v("OutboundLink")],1)]),e._v(" "),v("p",[v("a",{attrs:{href:"https://github.com/talltotal/all/blob/master/docs/dev/vscode-extension.md",target:"_blank",rel:"noopener noreferrer"}},[e._v("vscode 插件入门指南"),v("OutboundLink")],1)]),e._v(" "),v("h2",{attrs:{id:"先从-package-json-看做了什么"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#先从-package-json-看做了什么"}},[e._v("#")]),e._v(" 先从 "),v("code",[e._v("package.json")]),e._v(" 看做了什么")]),e._v(" "),v("ul",[v("li",[e._v("配置项\n"),v("ul",[v("li",[e._v("总开关："),v("code",[e._v("enable")])]),e._v(" "),v("li",[e._v("包管理器："),v("code",[e._v("packageManager")])]),e._v(" "),v("li",[e._v("显示状态："),v("code",[e._v("alwaysShowStatus")])]),e._v(" "),v("li",[e._v("node路径："),v("code",[e._v("nodePath")])]),e._v(" "),v("li",[e._v("eslint规则配置："),v("code",[e._v("options")])]),e._v(" "),v("li",[e._v("和服务器同步："),v("code",[e._v("trace.server")])]),e._v(" "),v("li",[e._v("运行的时机，输入/保存："),v("code",[e._v("run")])]),e._v(" "),v("li",[e._v("保存时自动fix："),v("code",[e._v("autoFixOnSave")])]),e._v(" "),v("li",[e._v("关闭warning提示："),v("code",[e._v("quiet")])]),e._v(" "),v("li",[e._v("使用eslint的语言："),v("code",[e._v("validate")])]),e._v(" "),v("li",[e._v("...")])])]),e._v(" "),v("li",[e._v("指令\n"),v("ul",[v("li",[e._v("自动fix："),v("code",[e._v("executeAutofix")])]),e._v(" "),v("li",[e._v("显示输出："),v("code",[e._v("showOutputChannel")])]),e._v(" "),v("li",[e._v("创建配置文件："),v("code",[e._v("createConfig")])]),e._v(" "),v("li",[e._v("开关："),v("code",[e._v("enable/disable")])]),e._v(" "),v("li",[e._v("...")])])]),e._v(" "),v("li",[e._v("工程构建：webpack")]),e._v(" "),v("li",[e._v("工程编译：tsc")])]),e._v(" "),v("h2",{attrs:{id:"代码部分"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#代码部分"}},[e._v("#")]),e._v(" 代码部分")]),e._v(" "),v("blockquote",[v("p",[e._v("client + server")])]),e._v(" "),v("h3",{attrs:{id:"client-activate"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#client-activate"}},[e._v("#")]),e._v(" client-activate")]),e._v(" "),v("ol",[v("li",[e._v("监听文件打开 / 监听配置文件变化\n"),v("blockquote",[v("p",[v("code",[e._v("vscode.workspace.onDidOpenTextDocument")]),e._v(" "),v("code",[e._v("vscode.workspace.onDidChangeConfiguration")])])]),e._v(" "),v("ul",[v("li",[e._v("创建右下角状态 "),v("code",[e._v("StatusBar")]),e._v(" > "),v("code",[e._v("command.showOutputChannel")])]),e._v(" "),v("li",[e._v("创建并开启 "),v("code",[e._v("client")]),e._v(" "),v("ul",[v("li",[e._v("根据从 server 收到的验证状态更新右下角状态")])])])])]),e._v(" "),v("li",[e._v("注册指令\n"),v("blockquote",[v("p",[v("code",[e._v("context.subscriptions.push(vscode.commands.registerCommand('command name', func))")])])])]),e._v(" "),v("li",[e._v("监听配置文件变化 / 监听工作区文件变化\n"),v("blockquote",[v("p",[v("code",[e._v("vscode.workspace.onDidChangeConfiguration")]),e._v(" "),v("code",[e._v("vscode.workspace.onDidChangeWorkspaceFolders")])])]),e._v(" "),v("ul",[v("li",[e._v("根据配置 "),v("code",[e._v("eslint.provideLintTask")]),e._v("，创建并执行 "),v("code",[e._v(".vscode.tasks.json")]),e._v(" 中的 "),v("code",[e._v("eslint")]),e._v(" 任务")])])])]),e._v(" "),v("h3",{attrs:{id:"autofixonsave-过程"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#autofixonsave-过程"}},[e._v("#")]),e._v(" "),v("code",[e._v("autoFixOnSave")]),e._v(" 过程")]),e._v(" "),v("ul",[v("li",[e._v("注册\n"),v("ul",[v("li",[e._v("client 注册指令 "),v("code",[e._v("eslint.executeAutofix")]),e._v("（根据指令执行）")]),e._v(" "),v("li",[e._v("server 监听事件 "),v("code",[e._v("documents.onWillSaveWaitUntil")]),e._v("（根据配置执行）")])])]),e._v(" "),v("li",[e._v("指令传递\n"),v("ol",[v("li",[e._v("触发 client 中注册的事件")]),e._v(" "),v("li",[v("code",[e._v("client.sendRequest")]),e._v(" 用 "),v("code",[e._v("command")]),e._v(" 的值做标识")]),e._v(" "),v("li",[v("code",[e._v("createConnection().onRequest")]),e._v(" 注册请求，通过数据中的 "),v("code",[e._v("command")]),e._v(" 执行相应任务")])])]),e._v(" "),v("li",[e._v("修改文本\n"),v("ul",[v("li",[v("code",[e._v("TextEdit.replace")])]),e._v(" "),v("li",[e._v("增加编辑 "),v("code",[e._v("WorkspaceChange.getTextEditChange().add(TextEdit[])")])]),e._v(" "),v("li",[e._v("在 "),v("code",[e._v("documents.onWillSaveWaitUntil")]),e._v(" 返回 "),v("code",[e._v("TextEdit[]")])])])])])])}),[],!1,null,null,null);v.default=_.exports}}]);