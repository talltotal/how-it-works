(window.webpackJsonp=window.webpackJsonp||[]).push([[29],{294:function(e,t,v){"use strict";v.r(t);var o=v(14),_=Object(o.a)({},(function(){var e=this,t=e._self._c;return t("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[t("h1",{attrs:{id:"vue-router"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#vue-router"}},[e._v("#")]),e._v(" vue-router")]),e._v(" "),t("ul",[t("li",[e._v("作为"),t("code",[e._v("Vue")]),e._v("插件\n"),t("blockquote",[t("p",[e._v("静态属性 "),t("code",[e._v("VueRouter.install: (Vue: Function) => void")]),e._v("\n用属性"),t("code",[e._v("VueRouter.install.installed: boolean")]),e._v("标识是否已经"),t("code",[e._v("install")]),e._v("，避免重复操作，另对比"),t("code",[e._v("app")]),e._v("，支持多个根节点共享路由实例")])]),e._v(" "),t("ol",[t("li",[e._v("属性注入\n"),t("ul",[t("li",[e._v("在实例上\n"),t("ul",[t("li",[e._v("使用"),t("code",[e._v("Vue.mixin")]),e._v("在实例生命周期中做操作")]),e._v(" "),t("li",[e._v("在"),t("code",[e._v("beforeCreate")]),e._v("hook中，将配置了"),t("code",[e._v("router")]),e._v("VueRouter实例的组件视为路由根节点，")]),e._v(" "),t("li",[e._v("执行VueRouter实例的"),t("code",[e._v("init")]),e._v("函数")]),e._v(" "),t("li",[e._v("以此为整个树上的节点增加"),t("code",[e._v("_routerRoot")]),e._v("属性，为 此组件")])])]),e._v(" "),t("li",[e._v("在原型上\n"),t("ul",[t("li",[e._v("增加"),t("em",[e._v("访问器属性")]),e._v(" "),t("ul",[t("li",[t("code",[e._v("$router")]),e._v(" 为 VueRouter实例")]),e._v(" "),t("li",[t("code",[e._v("$route")]),e._v(" 为 当前匹配路由\n"),t("blockquote",[t("p",[e._v("在VueRouter实例中，监听"),t("code",[e._v("history")]),e._v("变化，更新"),t("code",[e._v("_routerRoot._route")]),e._v("\n即做到每次获取"),t("code",[e._v("$route")]),e._v("都是当前路由")])])])])])])])])]),e._v(" "),t("li",[e._v("注册全局组件"),t("code",[e._v("<router-link>")]),e._v("、"),t("code",[e._v("<router-view>")])]),e._v(" "),t("li",[e._v("为自定义‘生命周期’，增加"),t("code",[e._v("Vue")]),e._v("配置处理项："),t("code",[e._v("Vue.config.optionMergeStrategies")]),e._v(" "),t("blockquote",[t("p",[e._v("等于"),t("code",[e._v("created")])])]),e._v(" "),t("ul",[t("li",[t("code",[e._v("beforeRouteEnter")])]),e._v(" "),t("li",[t("code",[e._v("beforeRouteLeave")])]),e._v(" "),t("li",[t("code",[e._v("beforeRouteUpdate")])])])])])]),e._v(" "),t("li",[e._v("作为路由原型\n"),t("blockquote",[t("p",[e._v("根据配置的不同"),t("code",[e._v("mode")]),e._v("，用不同的"),t("code",[e._v("history")]),e._v("做历史管理\n根据配置的"),t("code",[e._v("routes")]),e._v("，做正则、别名、重定向等匹配、跳转操作")])])])]),e._v(" "),t("h2",{attrs:{id:"vuerouter"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#vuerouter"}},[e._v("#")]),e._v(" VueRouter")]),e._v(" "),t("ul",[t("li",[t("code",[e._v("app: VueComponent")]),e._v(" "),t("blockquote",[t("p",[e._v("路由根节点")])]),e._v(" "),t("ul",[t("li",[e._v("在"),t("code",[e._v("history")]),e._v("变化的时候，更新"),t("code",[e._v("app._route")])]),e._v(" "),t("li",[e._v("组件销毁时，清空引用")])])]),e._v(" "),t("li",[t("code",[e._v("apps: VueComponent[]")]),e._v(" "),t("blockquote",[t("p",[e._v("支持多个路由根节点")])])]),e._v(" "),t("li",[t("code",[e._v("options: RouterOptions")])]),e._v(" "),t("li",[t("code",[e._v("mode: 'hash'|'history'|'abstract'")])]),e._v(" "),t("li",[t("code",[e._v("history: HashHistory | HTML5History | AbstractHistory")]),e._v(" "),t("blockquote",[t("p",[e._v("继承基类"),t("code",[e._v("History")])])]),e._v(" "),t("ul",[t("li",[e._v("跳转\n"),t("ul",[t("li",[e._v("和当前路由相同，不操作")]),e._v(" "),t("li",[e._v("对比目标路由和当前路由的匹配情况，确定激活的组件、更新的组件、替换的组件")]),e._v(" "),t("li",[e._v("依次执行\n"),t("ul",[t("li",[e._v("替换的组件生命周期"),t("code",[e._v("beforeRouteLeave")]),e._v(" "),t("ul",[t("li",[e._v("通过"),t("code",[e._v("Vue.extend(component).options['hookName']")]),e._v("拿到"),t("code",[e._v("Vue")]),e._v("处理过的组件函数")]),e._v(" "),t("li",[e._v("用"),t("code",[e._v("bind")]),e._v("绑定"),t("code",[e._v("instance")]),e._v("上下文")])])]),e._v(" "),t("li",[t("code",[e._v("router.beforeHooks")])]),e._v(" "),t("li",[e._v("更新的组件生命周期"),t("code",[e._v("beforeRouteUpdate")])]),e._v(" "),t("li",[e._v("激活的组件的"),t("code",[e._v("RouteConfig.beforeEnter")])]),e._v(" "),t("li",[e._v("加载匹配的组件中‘异步未加载’的\n"),t("blockquote",[t("p",[e._v("兼容以下两种形式，即把"),t("code",[e._v("resolve")]),e._v("和"),t("code",[e._v("reject")]),e._v("传给函数，再传给"),t("code",[e._v("return")]),e._v("值的"),t("code",[e._v("then")]),e._v(" "),t("a",{attrs:{href:"https://webpack.js.org/guides/code-splitting/#dynamic-imports",target:"_blank",rel:"noopener noreferrer"}},[e._v("webpack dynamic imports"),t("OutboundLink")],1)])]),e._v(" "),t("ul",[t("li",[t("code",[e._v("resolve => resolve(Component)")]),e._v(" "),t("ul",[t("li",[t("code",[e._v("resolve => require(['./Foo.vue'], resolve)")])])])]),e._v(" "),t("li",[t("code",[e._v("() => Promise<Component>")]),e._v(" "),t("ul",[t("li",[t("code",[e._v("() => import('./Foo.vue')")])])])])])]),e._v(" "),t("li",[t("code",[e._v("replace")]),e._v(" / "),t("code",[e._v("push")]),e._v(" 处理history，并用匹配的组件在对应的位置更新页面")]),e._v(" "),t("li",[e._v("激活的组件生命周期"),t("code",[e._v("beforeRouteEnter")])]),e._v(" "),t("li",[t("code",[e._v("router.resolveHooks")])])])]),e._v(" "),t("li",[e._v("在"),t("code",[e._v("popstate")]),e._v("事件缓存上一个页面以时间戳为key的滚动数据，并取出当前页面的数据做滚动处理\n"),t("ul",[t("li",[e._v("这里的缓存只在内存，所以页面一刷新，或做非单页的跳转就没了；前一个页面的滚动位置靠浏览器支持")]),e._v(" "),t("li",[e._v("可自行实现在"),t("code",[e._v("sessionStorage")]),e._v("的缓存+缓存最大历史数")])])])])]),e._v(" "),t("li",[t("code",[e._v("HashHistory")]),e._v(" "),t("blockquote",[t("p",[t("code",[e._v("mode==='hash'")])])]),e._v(" "),t("ul",[t("li",[t("code",[e._v("window.history")])]),e._v(" "),t("li",[t("code",[e._v("window.addEventListener('popstate'|'hashchange')")])]),e._v(" "),t("li",[t("code",[e._v("window.history.replaceState")]),e._v(" / "),t("code",[e._v("window.location.replace('xxx')")])]),e._v(" "),t("li",[t("code",[e._v("window.history.pushState")]),e._v(" / "),t("code",[e._v("window.location.hash='xxx'")])])])]),e._v(" "),t("li",[t("code",[e._v("HTML5History")]),e._v(" "),t("blockquote",[t("p",[t("code",[e._v("mode==='history'")])])]),e._v(" "),t("ul",[t("li",[t("code",[e._v("window.history")])]),e._v(" "),t("li",[t("code",[e._v("window.addEventListener('popstate')")])]),e._v(" "),t("li",[t("code",[e._v("window.history.replaceState")])]),e._v(" "),t("li",[t("code",[e._v("window.history.pushState")])])])]),e._v(" "),t("li",[t("code",[e._v("AbstractHistory")]),e._v(" "),t("blockquote",[t("p",[t("code",[e._v("mode==='abstract'")])])]),e._v(" "),t("ul",[t("li",[e._v("非浏览器环境必选模式")]),e._v(" "),t("li",[e._v("实例内部维护"),t("code",[e._v("stack")]),e._v("历史栈，"),t("code",[e._v("index")]),e._v("做当前指针")])])])])]),e._v(" "),t("li",[t("code",[e._v("matcher: Matcher")]),e._v(" "),t("blockquote",[t("p",[e._v("匹配器，路径匹配做‘跳转’（组件替换）、高亮")])]),e._v(" "),t("ul",[t("li",[e._v("解析配置\n"),t("ul",[t("li",[e._v("递归解析节点树")]),e._v(" "),t("li",[t("code",[e._v("path")]),e._v("都处理为绝对路径")]),e._v(" "),t("li",[e._v("按"),t("code",[e._v("path-to-regexp")]),e._v("做正则匹配规则")]),e._v(" "),t("li",[e._v("按别名"),t("code",[e._v("alias")]),e._v("重复处理，即用"),t("code",[e._v("alias")]),e._v("解析后作为"),t("code",[e._v("path")]),e._v("再做一次存储")])])]),e._v(" "),t("li",[e._v("闭包存储\n"),t("blockquote",[t("p",[e._v("用于快速路径匹配，获取"),t("code",[e._v("RouteRecord")])])]),e._v(" "),t("ul",[t("li",[t("code",[e._v("pathList")]),e._v(" "),t("blockquote",[t("p",[e._v("所有"),t("code",[e._v("path")]),e._v("\n以此数组做匹配的先后顺序（"),t("code",[e._v("*")]),e._v("值排在最后）\n匹配中没有指明"),t("code",[e._v("name")]),e._v("，有"),t("code",[e._v("path")]),e._v("的，循环"),t("code",[e._v("pathList")]),e._v("，取"),t("code",[e._v("pathMap")]),e._v("中的"),t("code",[e._v("RouteRecord")]),e._v("做正则匹配，获取"),t("code",[e._v("Route")])])])]),e._v(" "),t("li",[t("code",[e._v("pathMap")]),e._v(" "),t("blockquote",[t("p",[e._v("以"),t("code",[e._v("path")]),e._v("为key存储"),t("code",[e._v("RouteRecord")])])])]),e._v(" "),t("li",[t("code",[e._v("nameMap")]),e._v(" "),t("blockquote",[t("p",[e._v("以"),t("code",[e._v("name")]),e._v("为key存储"),t("code",[e._v("RouteRecord")]),e._v("\n匹配中指明"),t("code",[e._v("name")]),e._v("的，直接由"),t("code",[e._v("nameMap")]),e._v("获取"),t("code",[e._v("Route")])])])])])]),e._v(" "),t("li",[e._v("匹配\n"),t("ol",[t("li",[e._v("根据相对路由，获取绝对路由")]),e._v(" "),t("li",[e._v("获取"),t("code",[e._v("RouteRecord")])]),e._v(" "),t("li",[e._v("指定重定向的，按重定向再做匹配操作")]),e._v(" "),t("li",[e._v("指定别名的，用别名匹配的结果做返回")])])])])]),e._v(" "),t("li",[t("code",[e._v("beforeHooks")])]),e._v(" "),t("li",[t("code",[e._v("resolveHooks")])]),e._v(" "),t("li",[t("code",[e._v("afterHooks")])])]),e._v(" "),t("h2",{attrs:{id:"router-link-组件"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#router-link-组件"}},[e._v("#")]),e._v(" router-link 组件")]),e._v(" "),t("ul",[t("li",[e._v("处理链接激活状态\n"),t("ul",[t("li",[e._v("class\n"),t("ul",[t("li",[e._v("当前组件的配置值 > 总的配置值 > 默认值")]),e._v(" "),t("li",[t("code",[e._v("activeClass")]),e._v(" > "),t("code",[e._v("linkActiveClass")]),e._v(" > "),t("code",[e._v("router-link-active")])]),e._v(" "),t("li",[t("code",[e._v("exactActiveClass")]),e._v(" > "),t("code",[e._v("linkExactActiveClass")]),e._v(" > "),t("code",[e._v("router-link-exact-active")])])])]),e._v(" "),t("li",[e._v("匹配程度\n"),t("ul",[t("li",[e._v("相等")]),e._v(" "),t("li",[e._v("包含")])])])])]),e._v(" "),t("li",[e._v("链接跳转\n"),t("ul",[t("li",[e._v("事件\n"),t("blockquote",[t("p",[e._v("默认"),t("code",[e._v("click")]),e._v("\n考虑"),t("code",[e._v("Weex")]),e._v("环境没有"),t("code",[e._v("event.preventDefault")])])])]),e._v(" "),t("li",[e._v("不使用路由跳转的情况\n"),t("ul",[t("li",[e._v("组合了修改键")]),e._v(" "),t("li",[e._v("取消了默认事件")]),e._v(" "),t("li",[e._v("右键点击")]),e._v(" "),t("li",[t("code",[e._v('target="_blank"')])])])])])]),e._v(" "),t("li",[t("code",[e._v("scopedSlot")]),e._v("支持\n"),t("blockquote",[t("p",[e._v("提供数据，组件整个按默认插槽渲染返回")])])]),e._v(" "),t("li",[t("code",[e._v("tag")]),e._v("非"),t("code",[e._v("a")]),e._v("支持\n"),t("ul",[t("li",[e._v("插槽内有"),t("code",[e._v("<a>")]),e._v("，则将组件上的事件和属性都加到这个"),t("code",[e._v("<a>")]),e._v("上")]),e._v(" "),t("li",[e._v("插槽内没有"),t("code",[e._v("<a>")]),e._v("，事件加到本组件上")])])])]),e._v(" "),t("h2",{attrs:{id:"router-view-组件"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#router-view-组件"}},[e._v("#")]),e._v(" router-view 组件")]),e._v(" "),t("blockquote",[t("p",[e._v("匹配路由的占位组件\n函数式组件（无需管理状态、不用生命周期、只接收些prop）\n配置"),t("code",[e._v("functional")]),e._v("为"),t("code",[e._v("true")])])]),e._v(" "),t("div",{staticClass:"language-js extra-class"},[t("pre",{pre:!0,attrs:{class:"language-js"}},[t("code",[t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("{")]),e._v("\n    "),t("span",{pre:!0,attrs:{class:"token literal-property property"}},[e._v("functional")]),t("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token boolean"}},[e._v("true")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v("\n    "),t("span",{pre:!0,attrs:{class:"token comment"}},[e._v("// Props 是可选的")]),e._v("\n    "),t("span",{pre:!0,attrs:{class:"token literal-property property"}},[e._v("props")]),t("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("{")]),e._v("\n        "),t("span",{pre:!0,attrs:{class:"token comment"}},[e._v("// ...")]),e._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v("\n    "),t("span",{pre:!0,attrs:{class:"token comment"}},[e._v("// 为了弥补缺少的实例")]),e._v("\n    "),t("span",{pre:!0,attrs:{class:"token comment"}},[e._v("// 提供第二个参数作为上下文")]),e._v("\n    "),t("span",{pre:!0,attrs:{class:"token function-variable function"}},[e._v("render")]),t("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("function")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("(")]),t("span",{pre:!0,attrs:{class:"token parameter"}},[e._v("createElement"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v(" context")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(")")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("{")]),e._v("\n        "),t("span",{pre:!0,attrs:{class:"token comment"}},[e._v("// ...")]),e._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("}")]),e._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("}")]),e._v("\n")])])]),t("ul",[t("li",[e._v("使用"),t("code",[e._v("context.parent.$createElement")]),e._v("做元素的创建，而不用"),t("code",[e._v("createElement")]),e._v(" "),t("blockquote",[t("p",[e._v("用父节点的上下文渲染组件\n可以实现在"),t("code",[e._v("<router-view>")]),e._v("内定义"),t("code",[e._v('<slot name="slotName">')])])])]),e._v(" "),t("li",[t("code",[e._v("keep-active")]),e._v("的缓存组件存在父节点对象上\n"),t("ul",[t("li",[t("code",[e._v("parent._routerViewCache")])]),e._v(" "),t("li",[e._v("判断组件的激活/未激活状态")])])]),e._v(" "),t("li",[e._v("做"),t("code",[e._v("<router-view>")]),e._v("中的匹配同步"),t("code",[e._v("$route.matched")]),e._v("对象\n"),t("ul",[t("li",[e._v("计组件嵌套深度做"),t("code",[e._v("matched")]),e._v("的父子关系\n"),t("ul",[t("li",[t("code",[e._v("routerView: boolean")])]),e._v(" "),t("li",[t("code",[e._v("routerViewDepth: number")]),e._v(" "),t("blockquote",[t("p",[e._v("路由组件的判断依据：放置"),t("code",[e._v("$route.matched")]),e._v("的第"),t("code",[e._v("depth")]),e._v("项的配置"),t("code",[e._v("name")]),e._v("组件")])]),e._v(" "),t("ul",[t("li",[e._v("获取：循环判断"),t("code",[e._v("$parent")]),e._v("，累计"),t("code",[e._v("routerView")]),e._v("为"),t("code",[e._v("true")]),e._v("的组件数")]),e._v(" "),t("li",[e._v("使用：对应"),t("code",[e._v("$route.matched")]),e._v("的下标")])])])])]),e._v(" "),t("li",[e._v("在以下时机，"),t("code",[e._v("$route.matched[depth].instances")]),e._v("存放组件实例\n"),t("ul",[t("li",[e._v("当"),t("code",[e._v("router-view")]),e._v("创建的时候\n"),t("ul",[t("li",[t("code",[e._v("Vue.mixin")])]),e._v(" "),t("li",[e._v("在"),t("code",[e._v("beforeCreate")]),e._v("hook中赋值，"),t("code",[e._v("destroyed")]),e._v("hook中置空")])])]),e._v(" "),t("li",[e._v("当"),t("code",[e._v("component")]),e._v("实例重复用于不同的"),t("code",[e._v("router-view")]),e._v("中时")])])])])]),e._v(" "),t("li",[e._v("支持通过"),t("code",[e._v("<router-view>")]),e._v("传递的属性值和插槽\n"),t("ul",[t("li",[e._v("配置中的"),t("code",[e._v("props")])]),e._v(" "),t("li",[e._v("组件上的"),t("code",[e._v("attrs")])])])])]),e._v(" "),t("h2",{attrs:{id:"知识点回顾"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#知识点回顾"}},[e._v("#")]),e._v(" 知识点回顾")]),e._v(" "),t("ul",[t("li",[e._v("注册生命周期")]),e._v(" "),t("li",[e._v("函数式组件")]),e._v(" "),t("li",[e._v("history栈")])]),e._v(" "),t("h2",{attrs:{id:"工程"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#工程"}},[e._v("#")]),e._v(" 工程")]),e._v(" "),t("h3",{attrs:{id:"examples"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#examples"}},[e._v("#")]),e._v(" examples")]),e._v(" "),t("ul",[t("li",[e._v("做SPA的服务器配置 "),t("a",{attrs:{href:"https://www.npmjs.com/package/express-urlrewrite",target:"_blank",rel:"noopener noreferrer"}},[t("code",[e._v("express-urlrewrite")]),t("OutboundLink")],1)]),e._v(" "),t("li",[e._v("webpack配置 "),t("code",[e._v("resolve.alias['vue-router']")]),e._v(" 为本工程相对路径\n"),t("ul",[t("li",[e._v("作为 examples 更规范")]),e._v(" "),t("li",[e._v("作为 dev 开发模式做调试")])])]),e._v(" "),t("li",[e._v("权限控制的"),t("code",[e._v("beforeEnter")]),e._v("可以直接放到配置的"),t("code",[e._v("routes")]),e._v("的某一层组件上")]),e._v(" "),t("li",[e._v("Vue watch 配置值为 "),t("code",[e._v("String")]),e._v(" 类型，会获取本实例的此属性")])]),e._v(" "),t("div",{staticClass:"language-js extra-class"},[t("pre",{pre:!0,attrs:{class:"language-js"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[e._v("/**\n * 多个根节点共享路由组件\n */")]),e._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("const")]),e._v(" router "),t("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("new")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[e._v("VueRouter")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("{")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(")")]),e._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("const")]),e._v(" routerVue "),t("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),e._v(" Vue"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[e._v("extend")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("{")]),e._v("router"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(")")]),e._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("new")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[e._v("routerVue")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("{")]),e._v("\n    "),t("span",{pre:!0,attrs:{class:"token literal-property property"}},[e._v("el")]),t("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[e._v("'.app1'")]),e._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(")")]),e._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("new")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[e._v("routerVue")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("{")]),e._v("\n    "),t("span",{pre:!0,attrs:{class:"token literal-property property"}},[e._v("el")]),t("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[e._v("'.app2'")]),e._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(")")]),e._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[e._v("/**\n * 路由实例的嵌套\n */")]),e._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("const")]),e._v(" routerOut "),t("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("new")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[e._v("VueRouter")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("{")]),e._v("\n    "),t("span",{pre:!0,attrs:{class:"token literal-property property"}},[e._v("mode")]),t("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[e._v("'history'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v("\n    "),t("span",{pre:!0,attrs:{class:"token literal-property property"}},[e._v("routes")]),t("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("[")]),e._v("\n        "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("{")]),e._v("\n            "),t("span",{pre:!0,attrs:{class:"token literal-property property"}},[e._v("path")]),t("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[e._v("'/nested-router'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v("\n            "),t("span",{pre:!0,attrs:{class:"token literal-property property"}},[e._v("component")]),t("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("{")]),e._v("\n                "),t("span",{pre:!0,attrs:{class:"token literal-property property"}},[e._v("router")]),t("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("new")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[e._v("VueRouter")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("{")]),e._v("\n                    "),t("span",{pre:!0,attrs:{class:"token literal-property property"}},[e._v("mode")]),t("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[e._v("'abstract'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v("\n                    "),t("span",{pre:!0,attrs:{class:"token literal-property property"}},[e._v("routes")]),t("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("[")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("]")]),e._v("\n                "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v("\n                "),t("span",{pre:!0,attrs:{class:"token literal-property property"}},[e._v("template")]),t("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[e._v("'<div><router-view/></div>'")]),e._v("\n            "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("}")]),e._v("\n        "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("}")]),e._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("]")]),e._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(")")]),e._v("\n")])])]),t("h3",{attrs:{id:"test"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#test"}},[e._v("#")]),e._v(" test")]),e._v(" "),t("ul",[t("li",[e._v("unit: jasmine")]),e._v(" "),t("li",[e._v("e2e: nightwatch")])]),e._v(" "),t("h3",{attrs:{id:"type"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#type"}},[e._v("#")]),e._v(" type")]),e._v(" "),t("ul",[t("li",[e._v("静态数据类型 "),t("a",{attrs:{href:"https://flow.org/en/docs/getting-started/",target:"_blank",rel:"noopener noreferrer"}},[e._v("flow"),t("OutboundLink")],1),e._v(" "),t("ul",[t("li",[e._v("执行 check "),t("code",[e._v("flow-bin")])]),e._v(" "),t("li",[e._v("在 vue 文件中使用 "),t("code",[e._v("babel-preset-flow-vue")])]),e._v(" "),t("li",[e._v("在 eslint 中支持 "),t("code",[e._v("eslint-plugin-flowtype")])])])]),e._v(" "),t("li",[t("code",[e._v("types")]),e._v("目录")])]),e._v(" "),t("h3",{attrs:{id:"lint"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#lint"}},[e._v("#")]),e._v(" lint")]),e._v(" "),t("ul",[t("li",[e._v("eslint")]),e._v(" "),t("li",[e._v("commit msg\n"),t("ul",[t("li",[e._v("正则匹配"),t("code",[e._v("/^(v\\d+\\.\\d+\\.\\d+(-(alpha|beta|rc.\\d+))?$)|((revert: )?(feat|fix|docs|style|refactor|perf|test|workflow|ci|chore|types|build)(\\(.+\\))?: .{1,50})/")])]),e._v(" "),t("li",[e._v("另推荐工具："),t("a",{attrs:{href:"https://github.com/conventional-changelog/commitlint",target:"_blank",rel:"noopener noreferrer"}},[e._v("CommitLint"),t("OutboundLink")],1)])])]),e._v(" "),t("li",[e._v("gitHooks + lint-staged")])]),e._v(" "),t("h3",{attrs:{id:"build"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#build"}},[e._v("#")]),e._v(" build")]),e._v(" "),t("ul",[t("li",[e._v("rollup")]),e._v(" "),t("li",[e._v("terser.minify")]),e._v(" "),t("li",[e._v("zlib.gzip")])]),e._v(" "),t("h3",{attrs:{id:"其他"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#其他"}},[e._v("#")]),e._v(" 其他")]),e._v(" "),t("ul",[t("li",[e._v("docs: vuepress + "),t("a",{attrs:{href:"https://www.netlify.com",target:"_blank",rel:"noopener noreferrer"}},[e._v("netlify"),t("OutboundLink")],1)]),e._v(" "),t("li",[e._v("changelog: "),t("a",{attrs:{href:"https://github.com/conventional-changelog/conventional-changelog/tree/master/packages/conventional-changelog-cli#readme",target:"_blank",rel:"noopener noreferrer"}},[e._v("conventional-changelog"),t("OutboundLink")],1)]),e._v(" "),t("li",[e._v("ci + docker")]),e._v(" "),t("li",[e._v("支持 esm / jsdelivr")])])])}),[],!1,null,null,null);t.default=_.exports}}]);